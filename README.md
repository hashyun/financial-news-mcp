# Finance News MCP

A locked-down Model Context Protocol (MCP) server that aggregates finance headlines, price charts, and regulatory filings for analysts inside regulated environments.  The server is designed for **Claude Desktop** usage in institutions where the web UI must be disabled and every outbound request is controlled.

## Capabilities for financial teams
- Curated RSS ingestion driven by `feeds.yaml` with parallel fetching and deduplication.
- Yahoo Finance price history and options chains for equity, index, FX, and commodity symbols.
- Economic time series from the U.S. FRED API and Korean ECOS API (optional API keys).
- OpenDART filings lookup with graceful fallback to public news coverage when the API is unavailable.
- Korean/English keyword coverage through preset symbol maps for frequent tickers.

## Quick start (secure environment)
1. Create and activate a Python virtual environment.
2. Install the minimal dependency set:
   ```bash
   pip install -r requirements.txt
   ```
3. Export API keys only if you need premium data (all optional):
   - `export DART_API_KEY="<YOUR_KEY>"`
   - `export FRED_API_KEY="<YOUR_KEY>"`
   - `export BOK_API_KEY="<YOUR_KEY>"`
4. Launch the MCP server:
   ```bash
   python server.py
   ```

The project intentionally ships **without** any HTTP web application.  All interaction happens through the MCP protocol so that desktops can broker access without opening additional ports.

## Claude Desktop integration
1. Start the MCP server locally (`python server.py`).
2. Create or edit the Claude Desktop configuration file:
   - macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`
   - Windows: `%APPDATA%/Claude/claude_desktop_config.json`
3. Add an entry similar to the snippet below:
   ```json
   {
     "mcpServers": {
       {
         "name": "finance-news",
         "command": "python",
         "args": ["/absolute/path/to/server.py"],
         "description": "Secure finance news and market data tools"
       }
     }
   }
   ```
4. Restart Claude Desktop.  The tool palette will now expose the MCP tools for prompts such as “최근 코스피 동향 분석해줘” or “삼성전자 공시 찾아줘”.

## Security posture & configuration
- **HTTPS-only**: every outbound call must be HTTPS and is blocked otherwise.
- **Host allowlist**: defaults cover Yahoo Finance, Google News, Reuters/WSJ/Hankyung/MK/연합 RSS, FRED, ECOS, and OpenDART.  Extend with `FINANCE_NEWS_ALLOWED_HOSTS="host1,host2"` when onboarding additional vetted feeds.
- **Strict mode on by default**: set `FINANCE_NEWS_STRICT_SECURITY=0` only when testing against non-whitelisted endpoints.
- **Caching disabled by default**: enable short-lived disk caching explicitly with `FINANCE_NEWS_ENABLE_CACHE=1` when policy allows it.
- **Proxy isolation**: the shared requests session ignores system proxy settings unless you configure them manually.

For regulated deployments, keep the process on an isolated host, restrict outbound firewall rules to the allowlisted domains, and monitor the optional audit logs generated by Claude Desktop.

## Data sources & customization
- Edit `feeds.yaml` to curate organisation-approved RSS sources.  Each URL is fetched through the secured HTTP client and merged in publication order.
- `finance_news/data_sources.py` contains the keyword-to-symbol maps for commodities, FX, indices, and equities.  Extend these dictionaries to match internal coverage lists.

## Available MCP tools
| Tool name     | Purpose                                                                    |
|---------------|----------------------------------------------------------------------------|
| `fetch_chart` | Historical OHLCV data from Yahoo Finance for a given symbol/range.         |
| `latest_news` | Returns the newest deduplicated articles from configured RSS feeds.        |
| `options_chain` | Yahoo Finance options chain with optional expiration filtering.         |
| `fred_series` | Pulls FRED economic time series (requires `FRED_API_KEY`).                 |
| `ecos_series` | Retrieves Bank of Korea ECOS macro series (requires `BOK_API_KEY`).        |
| `dart_filings` | Queries OpenDART filings or falls back to Google News coverage.          |

Invoke these tools directly from Claude Desktop’s tool inspector or embed them in saved prompts for analysts.

## API keys
All integrations work without keys, but supplying them unlocks richer datasets:
- `DART_API_KEY` – OpenDART filings.
- `FRED_API_KEY` – U.S. Federal Reserve economic series.
- `BOK_API_KEY` – Bank of Korea ECOS macro data.

## Example analyst prompts
- “코스피 최근 한 달 추세와 거래량을 알려줘” → Claude calls `fetch_chart` for `^KS11`.
- “삼성전자 관련 최신 뉴스 5건만 정리해줘” → Claude calls `latest_news` and summarises.
- “10년 국채 수익률 FRED 시계열을 받아와” → Claude invokes `fred_series` with `DGS10`.

이 저장소는 금융권 환경에서도 안전하게 사용할 수 있도록 설계되었습니다.  필요에 따라 피드, 허용 도메인, 프롬프트 템플릿을 조정해 내부 업무 흐름에 맞춰 활용하세요.
